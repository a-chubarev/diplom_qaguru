# Test info

- Name: Booking API Tests >> Получить id всех бронирований
- Location: /home/runner/work/diplom_qaguru/diplom_qaguru/tests/api_tests/booking_service.test.js:17:9

# Error details

```
Error: Авторизация не выполнена. 503: <!DOCTYPE html>
	<html>
	  <head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
		<title>Application Error</title>
		<style media="screen">
		  html,body,iframe {
			margin: 0;
			padding: 0;
		  }
		  html,body {
			height: 100%;
			overflow: hidden;
		  }
		  iframe {
			width: 100%;
			height: 100%;
			border: 0;
		  }
		</style>
	  </head>
	  <body>
		<iframe src="//www.herokucdn.com/error-pages/application-error.html"></iframe>
	  </body>
	</html>
    at AuthController.login (/home/runner/work/diplom_qaguru/diplom_qaguru/services/api/controllers/auth.controller.js:22:19)
    at ApiClient.authenticate (/home/runner/work/diplom_qaguru/diplom_qaguru/services/api/client/api.client.js:31:22)
    at /home/runner/work/diplom_qaguru/diplom_qaguru/tests/api_tests/booking_service.test.js:11:9
```

# Test source

```ts
   1 |
   2 | import { ENDPOINTS } from '../utils/endpoints';
   3 | import { BaseController } from './base.controller';
   4 |
   5 |
   6 | export class AuthController extends BaseController {
   7 |     constructor(baseURL) {
   8 |         super(baseURL);
   9 |     }
  10 |     async login(credentials) {
  11 |         const response = await this.request.send({
  12 |             method: 'POST',
  13 |             path: ENDPOINTS.AUTH,
  14 |             headers: {
  15 |                 'Content-Type': 'application/json'
  16 |             },
  17 |             data: credentials
  18 |         });
  19 |
  20 |         if (response.status() !== 200) {
  21 |             const text = await response.text();
> 22 |             throw new Error(`Авторизация не выполнена. ${response.status()}: ${text}`);
     |                   ^ Error: Авторизация не выполнена. 503: <!DOCTYPE html>
  23 |         }
  24 |
  25 |         const body = JSON.parse(await response.text());
  26 |         return body.token;
  27 |     }
  28 | }
```