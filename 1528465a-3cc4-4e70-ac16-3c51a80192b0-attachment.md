# Test info

- Name: Academy bugs Test >> When clicking on the update button the product quantity becomes 2 again
- Location: /home/runner/work/diplom_qaguru/diplom_qaguru/tests/ui_tests/academybugs.test.js:129:9

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('#popmake-4406 .example-tile-heading:has-text("#1 Awesome!")')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('#popmake-4406 .example-tile-heading:has-text("#1 Awesome!")')

    at /home/runner/work/diplom_qaguru/diplom_qaguru/tests/ui_tests/academybugs.test.js:133:51
```

# Page snapshot

```yaml
- text: Manage consent
- link "Skip to content":
  - /url: "#sq-content"
- banner:
  - heading "AcademyBugs.com" [level=3]:
    - link "AcademyBugs.com":
      - /url: https://academybugs.com/
  - navigation:
    - list:
      - listitem:
        - link "Examples of Bugs":
          - /url: https://academybugs.com/
      - listitem:
        - link "Types of Bugs":
          - /url: https://academybugs.com/types/
      - listitem:
        - link "Find Bugs":
          - /url: https://academybugs.com/find-bugs/
      - listitem:
        - link "Report Bugs":
          - /url: https://academybugs.com/report-bugs/
      - listitem:
        - link "":
          - /url: "#"
- main:
  - article:
    - text: SHOPPING CART  CHECKOUT DETAILS  SUBMIT PAYMENT
    - table:
      - rowgroup:
        - row "Product Price Quantity Total":
          - cell "Product"
          - cell "Price"
          - cell "Quantity"
          - cell "Total"
      - rowgroup:
        - row " DNK Yellow Shoes DNK Yellow Shoes $45.00 - 1 + UPDATE $90.00":
          - cell ""
          - cell "DNK Yellow Shoes":
            - img "DNK Yellow Shoes"
          - cell "DNK Yellow Shoes":
            - link "DNK Yellow Shoes":
              - /url: https://academybugs.com/store/dnk-yellow-shoes/
          - cell "$45.00"
          - cell "- 1 + UPDATE":
            - table:
              - rowgroup:
                - row "- 1 +":
                  - cell "-":
                    - button "-"
                  - cell "1":
                    - spinbutton: "2"
                  - cell "+":
                    - button "+"
                - row "UPDATE":
                  - cell "UPDATE"
          - cell "$90.00"
    - text: Cart Totals Cart Subtotal $90.00 Shipping $7.99 Grand Total $197.99
    - link "Checkout":
      - /url: https://academybugs.com/my-cart/?ec_page=checkout_info
    - link "Continue Shopping":
      - /url: https://academybugs.com/store/
    - text: Coupon
    - textbox "Enter Coupon Code"
    - text: Apply Coupon Gift Card
    - textbox "Enter Gift Card"
    - text: Redeem Gift Card
- heading "Select a Currency" [level=4]
- combobox:
  - option "USD" [selected]
  - option "EUR"
  - option "GBP"
  - option "JPY"
- heading "Product Search" [level=4]
- combobox
- button "Search"
- heading "Hot Item" [level=4]
- link:
  - /url: https://academybugs.com/anchor-bracelet
  - img
- link "Silver Heart Bracelet":
  - /url: https://academybugs.com/anchor-bracelet
- text: $275.00
- heading "Store Menu" [level=4]
- list:
  - listitem:
    - link "All Items":
      - /url: https://academybugs.com/store/all-items/
  - listitem:
    - link "Accessories [+]":
      - /url: "#"
  - listitem:
    - link "Fashion Type [+]":
      - /url: "#"
  - listitem:
    - link "Women's Pants":
      - /url: https://academybugs.com/store/womens-pants/
- heading "Filter by Price" [level=4]
- link "$15.00 - $19.99 (1)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=7
- link "$25.00 - $49.99 (2)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=2
- link "$50.00 - $99.99 (3)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=3
- link "$100.00 - $299.99 (11)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=4
- link "Greater Than $299.99 (1)":
  - /url: https://academybugs.com/my-cart/?&perpage=25&pricepoint=5
- heading "Shopping Cart" [level=4]
- link "Shopping Cart (2)":
  - /url: "#"
- heading "Your Account" [level=4]
- text: Email Address*
- textbox
- text: Password*
- textbox
- paragraph:
  - link "Sign Up":
    - /url: https://academybugs.com/account/?ec_page=register
- button "SIGN IN"
- contentinfo:
  - list:
    - listitem:
      - link "uTest":
        - /url: https://www.utest.com/academy
        - img "uTest"
    - listitem:
      - link "Terms & Conditions":
        - /url: https://www.utest.com/terms-and-conditions
    - listitem:
      - link "Privacy Policy":
        - /url: https://www.utest.com/privacy-policy
- link "":
  - /url: "#"
```

# Test source

```ts
   33 |         productCard = new ProductCard(page);
   34 |         registerPage = new RegisterPage(page);
   35 |         forgotPasswordPage = new ForgotPasswordPage(page);
   36 |         userCartPage = new UserCartPage(page);
   37 |         bugPopup = new BugPopup(page);
   38 |         loginPage = new LoginPage(page);
   39 |         cookieConsentDialog = new CookieConsentDialog(page);
   40 |         resultPopup = new ResultPopup(page);
   41 |         bugInfoPopup = new BugInfoPopup(page);
   42 |         hintPopup = new HintPopup(page);
   43 |         await mainPage.openPage()
   44 |         await cookieConsentDialog.acceptAllCookies()
   45 |     })
   46 |
   47 |
   48 |     // test('The product image fills the box entirely', {tag: ['@Medium', '@Visual']},async ({}) => {
   49 |     //     //Выбираем количество товаров на странице
   50 |     //     await productsPage.clickProductImage('4281370')
   51 |     //     await expect(mainPage.nonCrashBugMessage).toBeVisible()
   52 |     // })
   53 |
   54 |
   55 |     test('The page freezes when clicking on the numbers of results', {tag: ['@High', '@Crash']}, async ({}) => {
   56 |         //Выбираем количество товаров на странице
   57 |         await productsPage.selectPerPage(50)
   58 |         await expect(bugPopup.bugMessage).toBeVisible()
   59 |     })
   60 |
   61 |     test('The page freezes when changing the currency', {tag: ['@High', '@Crash']},async ({}) => {
   62 |         //Кликаем на товар
   63 |         await productsPage.clickProductItem('4481370')
   64 |         await productCard.selectCurrency('gbp')
   65 |         await expect(bugPopup.alternativeBugMessage).toBeVisible()
   66 |     })
   67 |
   68 |     test('The manufacturer link opens an error page', {tag: ['@Medium', '@Functional']},async ({}) => {
   69 |         await productsPage.clickProductItem('4481370')
   70 |         await productCard.clickManufacturerLink()
   71 |         await expect(bugPopup.nonCrashBugMessage).toBeVisible()
   72 |     })
   73 |
   74 |     test('There is too much space before the last letter in "Return to Store"', {tag: ['@Low', '@Content']},async ({}) => {
   75 |         await productsPage.clickProductItem('4481370')
   76 |         await productCard.clickAddToCartButton()
   77 |         await userCartPage.removeCartItem('DNK Yellow Shoes')
   78 |         await userCartPage.returnButtonClick()
   79 |         await expect(bugPopup.nonCrashBugMessage).toBeVisible()
   80 |     })
   81 |
   82 |     test('The page becomes unresponsive when clicking on "Post Comment"', {tag: ['@High', '@Crash']}, async ({}) => {
   83 |         await productsPage.clickProductItem('4481370')
   84 |         await productCard.fillProductReply()
   85 |         await expect(bugPopup.bugMessage).toBeVisible()
   86 |     })
   87 |
   88 |     test('The Sign In button overlaps the footer', {tag: ['@Low', '@Visual']}, async ({}) => {
   89 |         await productsPage.clickProductItem('4481370')
   90 |         await productCard.clickSignInButton()
   91 |         await expect(bugPopup.nonCrashBugMessage).toBeVisible()
   92 |     })
   93 |
   94 |     test('The caption of the Sign In button is misaligned vertically', {tag: ['@Low', '@Visual']}, async ({page}) => {
   95 |         await productsPage.clickProductItem('4481370')
   96 |         await productCard.clickSignInButton()
   97 |         await bugPopup.isPopupVisible()
   98 |         await bugPopup.fillPopup('Visual', 'The Sign In button should be above the footer')
   99 |         await resultPopup.clickViewReportButton()
  100 |         await bugInfoPopup.closePopup()
  101 |         await hintPopup.closePopup()
  102 |         await loginPage.clickSignInButton()
  103 |         await page.waitForTimeout(10000)
  104 |         await expect(mainPage.nonCrashBugMessage).toBeVisible()
  105 |     })
  106 |
  107 |     test('The page becomes unresponsive when clicking on "Retrieve Password" and no email is sent', {tag: ['@High', '@Crash']},async ({}) => {
  108 |         await productsPage.clickProductItem('4481370')
  109 |         await productCard.clickSignUpLink()
  110 |         await registerPage.clickForgotPasswordLink()
  111 |         await forgotPasswordPage.fillRetrieveEmailField()
  112 |         await forgotPasswordPage.clickRetrievePasswordButton()
  113 |         await expect(bugPopup.bugMessage).toBeVisible()
  114 |     })
  115 |
  116 |     test('The text under the New User section is in another language', {tag: ['@Low', '@Content']}, async ({page}) => {
  117 |         await productsPage.clickProductItem('4481370')
  118 |         await productCard.clickSignInButton()
  119 |         await bugPopup.isPopupVisible()
  120 |         await bugPopup.fillPopup('Visual', 'The Sign In button should be above the footer')
  121 |         await resultPopup.clickViewReportButton()
  122 |         await bugInfoPopup.closePopup()
  123 |         await hintPopup.closePopup()
  124 |         await loginPage.clickNotRegisteredLinkLocator()
  125 |         await page.waitForTimeout(10000)
  126 |         await expect(bugPopup.popup).toBeVisible()
  127 |     })
  128 |
  129 |     test('When clicking on the update button the product quantity becomes 2 again', {tag: ['@High', '@Functional']}, async ({}) => {
  130 |         await productsPage.clickProductItem('4481370')
  131 |         await productCard.addToCart()
  132 |         await userCartPage.updateCartItemQuantity('DNK Yellow Shoes', 3)
> 133 |         await expect(resultPopup.firstBugMessage).toBeVisible()
      |                                                   ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  134 |     })
  135 |
  136 |     test(' The page becomes unresponsive when increasing the quantity with the pink or green colors chosen', {tag: ['@High', '@Crash']}, async ({}) => {
  137 |         await productsPage.clickProductItem('4381370')
  138 |         await productCard.selectProductColor('Green')
  139 |         await productCard.increaseProductQuantity(1)
  140 |         await expect(bugPopup.bugMessage).toBeVisible()
  141 |     })
  142 | })
  143 |
  144 |
  145 |
```